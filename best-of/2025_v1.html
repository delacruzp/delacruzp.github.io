<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recap '25 | A Year in Motion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lucide-static/0.321.0/lucide.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&family=JetBrains+Mono:wght@400;700&family=Playfair+Display:italic&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: black;
            color: white;
            overflow-x: hidden;
        }

        .font-mono { font-family: 'JetBrains+Mono', monospace; }
        .font-serif { font-family: 'Playfair+Display', serif; }

        .grain-overlay {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 60;
            opacity: 0.07;
            mix-blend-mode: overlay;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        .background-image {
            transition: opacity 1.5s ease-in-out, transform 10s linear;
        }

        .section-content {
            transition: all 1s ease-out;
            opacity: 0;
            transform: translateY(50px);
            filter: blur(10px);
        }

        .section-content.visible {
            opacity: 1;
            transform: translateY(0);
            filter: blur(0);
        }

        .hide-scroll {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .hide-scroll::-webkit-scrollbar {
            display: none;
        }

        .active-tab {
            background-color: white;
            color: black;
            transform: scale(1.05);
        }

        /* Prevent scroll in index mode */
        body.index-mode {
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div class="grain-overlay"></div>

    <!-- Background Layer -->
    <div id="bg-container" class="fixed inset-0 z-0">
        <div class="absolute inset-0 bg-zinc-900"></div>
    </div>

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-[100] p-4 md:p-6 flex justify-between items-center mix-blend-difference text-white">
        <div class="flex items-center gap-3">
            <div class="flex items-center gap-2">
                <div class="w-1.5 h-1.5 bg-white rounded-full animate-pulse"></div>
                <span class="font-bold tracking-tighter text-xs md:text-base uppercase">Recap '25</span>
            </div>
            
            <div class="flex bg-white/5 backdrop-blur-xl rounded-full p-0.5 border border-white/10">
                <button onclick="setViewMode('immersive')" id="btn-immersive" class="p-1.5 rounded-full transition-all bg-white text-black">
                    <i data-lucide="layers" class="w-3 h-3"></i>
                </button>
                <button onclick="setViewMode('index')" id="btn-index" class="p-1.5 rounded-full transition-all text-white/40 hover:text-white">
                    <i data-lucide="layout-grid" class="w-3 h-3"></i>
                </button>
            </div>
        </div>
        
        <div id="nav-tabs" class="hidden lg:flex bg-white/5 backdrop-blur-xl rounded-full p-0.5 border border-white/10">
            <!-- Tabs injected by JS -->
        </div>
        
        <div id="status-text" class="font-mono text-[8px] tracking-widest opacity-50 hidden sm:block uppercase">
            V.01 SCROLL
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content" class="relative z-10">
        <!-- Views injected by JS -->
    </main>

    <!-- Progress Bar -->
    <div id="progress-bar" class="fixed bottom-0 left-0 h-0.5 bg-white z-[100] transition-all duration-300 w-0"></div>

    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        const INITIAL_DATA = {
            movies: [
                { id: 'm1', title: "A Nice Indian Boy", year: "Cinema", rating: 5, url: "#", image: "https://images.unsplash.com/photo-1485846234645-a62644f84728?auto=format&fit=crop&q=80&w=1920", review: "I was laughing out loud throughout this entire movie.", quotes: ["Are you waiting for a big speech to make you stay?", "It's 2024, the world is burning!"] },
                { id: 'm2', title: "Tetris", year: "Cinema", rating: 4.5, url: "#", image: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?auto=format&fit=crop&q=80&w=1920", review: "This movie fucking slaps. Suits doing capitalism." },
                { id: 'm3', title: "Sorry, Baby", year: "Cinema", rating: 4.5, url: "#", image: "https://images.unsplash.com/photo-1536440136628-849c177e76a1?auto=format&fit=crop&q=80&w=1920", review: "The cinematography was incredible." },
                { id: 'm4', title: "Bugonia", year: "Cinema", rating: 4, url: "#", image: "https://images.unsplash.com/photo-1594909122845-11baa439b7bf?auto=format&fit=crop&q=80&w=1920", review: "Diversify the words of the diversity training." },
                { id: 'm5', title: "Eddington", year: "Cinema", rating: 4, url: "#", image: "https://images.unsplash.com/photo-1509248961158-e54f6934749c?auto=format&fit=crop&q=80&w=1920", review: "Be nicer to each other." }
            ],
            books: [
                { id: 'b1', title: "Giovanniâ€™s Room", year: "Literature", rating: 5, url: "#", image: "https://images.unsplash.com/photo-1544947950-fa07a98d237f?auto=format&fit=crop&q=80&w=1920", quotes: ["Happiness was all we had."] },
                { id: 'b2', title: "A Little Daylight Left", year: "2025", rating: 4, url: "#", image: "https://images.unsplash.com/photo-1518895949257-7621c3c786d7?auto=format&fit=crop&q=80&w=1920" },
                { id: 'b3', title: "The Seven Moons of Maali Almeida", year: "2022", rating: 4, url: "#", image: "https://images.unsplash.com/photo-1512820790803-83ca734da794?auto=format&fit=crop&q=80&w=1920", review: "A difficult read, worth the effort." }
            ],
            essays: [
                { id: 'e1', title: "The Goon Squad", author: "Daniel Kolitz", url: "#", image: "https://images.unsplash.com/photo-1516339901601-2e1b62dc0c45?auto=format&fit=crop&q=80&w=1920", site: "Harpers", review: "Loneliness and porn's next frontier." },
                { id: 'e2', title: "Peak Gay Sluttiness", author: "Steven Phillips-Horst", url: "#", image: "https://images.unsplash.com/photo-1526218626217-dc65a29bb444?auto=format&fit=crop&q=80&w=1920", site: "The Cut" }
            ],
            podcasts: [
                { id: 'p1', title: "The Daily", year: "Podcast", rating: 5, url: "#", image: "https://images.unsplash.com/photo-1590602847861-f357a9332bbc?auto=format&fit=crop&q=80&w=1920", review: "The standard for journalism." }
            ]
        };

        let activeTab = 'all';
        let viewMode = 'immersive';
        let activeId = null;

        function getFilteredData() {
            if (activeTab === 'all') {
                return Object.entries(INITIAL_DATA).flatMap(([type, items]) => 
                    items.map(item => ({ ...item, contentType: type.slice(0, -1) }))
                );
            }
            return INITIAL_DATA[activeTab].map(item => ({ ...item, contentType: activeTab.slice(0, -1) }));
        }

        function setViewMode(mode) {
            viewMode = mode;
            document.body.classList.toggle('index-mode', mode === 'index');
            document.getElementById('btn-immersive').className = `p-1.5 rounded-full transition-all ${mode === 'immersive' ? 'bg-white text-black' : 'text-white/40 hover:text-white'}`;
            document.getElementById('btn-index').className = `p-1.5 rounded-full transition-all ${mode === 'index' ? 'bg-white text-black' : 'text-white/40 hover:text-white'}`;
            document.getElementById('status-text').innerText = mode === 'immersive' ? 'V.01 SCROLL' : 'GRID OVERVIEW';
            render();
            if (mode === 'immersive') window.scrollTo(0, 0);
        }

        function setActiveTab(tab) {
            activeTab = tab;
            render();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function handleIndexSelect(id) {
            activeId = id;
            setViewMode('immersive');
        }

        function render() {
            const data = getFilteredData();
            const main = document.getElementById('main-content');
            const bgContainer = document.getElementById('bg-container');
            const navTabs = document.getElementById('nav-tabs');
            
            // Render Tabs
            navTabs.innerHTML = ['all', 'movies', 'books', 'essays', 'podcasts'].map(tab => `
                <button onclick="setActiveTab('${tab}')" class="px-3 py-1.5 rounded-full text-[8px] font-black uppercase tracking-widest transition-all ${activeTab === tab ? 'bg-white text-black scale-105' : 'text-white/60 hover:text-white'}">
                    ${tab}
                </button>
            `).join('');

            if (viewMode === 'immersive') {
                bgContainer.style.display = 'block';
                // Render Background Images
                bgContainer.innerHTML = '<div class="absolute inset-0 bg-zinc-900"></div>' + data.map(item => `
                    <div id="bg-${item.id}" class="background-image absolute inset-0 transition-opacity duration-[1500ms] ease-in-out opacity-0">
                        <img src="${item.image}" class="w-full h-full object-cover scale-100">
                        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/50 to-black/30"></div>
                        <div class="absolute inset-0 bg-black/20 backdrop-blur-[2px]"></div>
                    </div>
                `).join('');

                // Render Sections
                main.innerHTML = `
                    <div class="min-h-screen flex flex-col items-center justify-center text-center p-6 relative">
                        <div class="absolute inset-0 flex items-center justify-center opacity-10 pointer-events-none select-none">
                            <span class="text-[25vw] font-black leading-none tracking-tighter text-transparent bg-clip-text bg-gradient-to-b from-white to-transparent">25</span>
                        </div>
                        <div class="relative z-10 max-w-4xl space-y-6">
                            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full border border-white/30 bg-black/20 backdrop-blur-sm text-[8px] font-mono uppercase tracking-widest text-white/80">
                                <i data-lucide="play" class="w-2.5 h-2.5"></i><span>Curated Archive</span>
                            </div>
                            <h1 class="text-5xl md:text-9xl font-bold tracking-tighter leading-[0.85] text-white mix-blend-overlay">A Year in <br> Motion.</h1>
                            <p class="text-lg md:text-2xl font-light text-white/70 max-w-lg mx-auto leading-relaxed">The frames and fragments that defined the journey.</p>
                        </div>
                        <div class="absolute bottom-12 animate-bounce text-white/30"><i data-lucide="chevron-down"></i></div>
                    </div>
                    <div class="pb-32">
                        ${data.map((item, index) => `
                            <div class="section-trigger min-h-screen flex items-center p-6 md:p-24 relative z-10 ${index % 2 === 0 ? 'justify-start' : 'justify-end'}" data-id="${item.id}">
                                <div class="section-content max-w-2xl w-full">
                                    <div class="flex items-center gap-4 mb-8">
                                        <span class="px-4 py-1.5 bg-white text-black text-xs font-black uppercase tracking-widest">${item.contentType}</span>
                                        ${item.rating ? `<div class="flex items-center gap-1 text-white font-mono text-sm"><i data-lucide="star" class="w-3.5 h-3.5 text-yellow-400 fill-yellow-400"></i> ${item.rating}/5</div>` : ''}
                                    </div>
                                    <h2 class="text-6xl md:text-8xl font-bold mb-6 tracking-tighter leading-[0.9] text-white mix-blend-difference">${item.title}</h2>
                                    <div class="h-px bg-white/30 w-full mb-8"></div>
                                    <p class="text-white/80 font-mono text-sm mb-8 uppercase tracking-widest">${item.author || item.site || item.year}</p>
                                    ${item.review ? `<p class="text-xl md:text-2xl font-light leading-relaxed text-white mb-10">${item.review}</p>` : ''}
                                    ${item.quotes ? `<div class="space-y-6 pl-6 border-l-2 border-white/20">${item.quotes.map(q => `<p class="text-lg italic text-white/70 font-serif">"${q}"</p>`).join('')}</div>` : ''}
                                    <div class="mt-12">
                                        <a href="${item.url}" target="_blank" class="group inline-flex items-center gap-3 px-8 py-4 bg-white/10 hover:bg-white text-white hover:text-black backdrop-blur-md rounded-full transition-all duration-300">
                                            <span class="text-xs font-bold uppercase tracking-widest">Explore Item</span>
                                            <i data-lucide="arrow-up-right" class="w-4 h-4 transition-transform group-hover:translate-x-1 group-hover:-translate-y-1"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;

                setupObserver();
            } else {
                bgContainer.style.display = 'none';
                main.innerHTML = `
                    <div class="h-screen pt-20 pb-12 px-4 flex items-center overflow-hidden">
                        <div class="w-full max-w-5xl mx-auto">
                            <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2">
                                ${data.map(item => `
                                    <div onclick="handleIndexSelect('${item.id}')" class="group relative aspect-[3/4] overflow-hidden rounded-lg bg-zinc-900 cursor-pointer border border-white/5 hover:border-white/40 transition-all duration-300">
                                        <img src="${item.image}" class="absolute inset-0 w-full h-full object-cover opacity-60 grayscale group-hover:grayscale-0 group-hover:scale-110 transition-all duration-500">
                                        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/10 to-transparent opacity-80"></div>
                                        <div class="absolute inset-0 p-3 flex flex-col justify-end">
                                            <div class="flex items-center justify-between mb-1">
                                                <span class="text-[6px] font-black uppercase tracking-tighter px-1 py-0.5 bg-white text-black leading-none">${item.contentType}</span>
                                                ${item.rating ? `<div class="flex items-center gap-0.5 text-yellow-400"><i data-lucide="star" class="w-1.5 h-1.5 fill-yellow-400"></i><span class="text-[6px] font-mono text-white">${item.rating}</span></div>` : ''}
                                            </div>
                                            <h3 class="text-[9px] md:text-[10px] font-bold tracking-tight leading-tight line-clamp-2 uppercase">${item.title}</h3>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }
            lucide.createIcons();
        }

        function setupObserver() {
            const options = { threshold: 0.45, rootMargin: "-10% 0px -10% 0px" };
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const id = entry.target.getAttribute('data-id');
                    const content = entry.target.querySelector('.section-content');
                    const bg = document.getElementById(`bg-${id}`);
                    
                    if (entry.isIntersecting) {
                        content.classList.add('visible');
                        if (bg) {
                            bg.style.opacity = '1';
                            bg.querySelector('img').style.transform = 'scale(1.1)';
                        }
                        updateProgress(id);
                    } else {
                        content.classList.remove('visible');
                        if (bg) {
                            bg.style.opacity = '0';
                            bg.querySelector('img').style.transform = 'scale(1)';
                        }
                    }
                });
            }, options);

            document.querySelectorAll('.section-trigger').forEach(s => observer.observe(s));
        }

        function updateProgress(id) {
            const data = getFilteredData();
            const idx = data.findIndex(item => item.id === id);
            const progress = ((idx + 1) / data.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }

        // Initialize
        window.onload = () => {
            render();
            lucide.createIcons();
        };
    </script>
</body>
</html>